{"ast":null,"code":"import React from 'react';\nimport { filterObj } from '../../functions';\n/**\n * \n * PROPS\n * url: URL string to fetch\n * init (optional): init object for fetch API\n * propName: string name of props to pass state through\n * responseHandler (optional): ( json ) => any\n * errorHandler (optional): ( exception ) => void\n */\n\nexport default class App extends React.Component {\n  componentDidMount() {\n    let promise;\n\n    if (this.props.init) {\n      promise = fetch(this.props.url, this.props.init);\n    } else {\n      promise = fetch(this.props.url);\n    }\n\n    promise.then(r => r.json()).then(j => {\n      if (j) {\n        this.setState({\n          [this.props.propName]: this.props.responseHandler ? this.props.responseHandler(j) : j\n        });\n      }\n    }).catch(e => this.props.errorHandler ? this.props.errorHandler(e) : console.warn(e));\n  }\n\n  render() {\n    let newProps = filterObj(this.props, [\"url\", \"init\", \"propName\", \"responseHandler\", \"errorHandler\"]);\n\n    if (this.state) {\n      newProps[this.props.propName] = this.state[this.props.propName];\n    }\n\n    return React.cloneElement(React.Children.only(this.props.children), newProps);\n  }\n\n}","map":{"version":3,"sources":["/home/enriquerene/Projects/customers/dearjohn/frontend/src/components/http/App.js"],"names":["React","filterObj","App","Component","componentDidMount","promise","props","init","fetch","url","then","r","json","j","setState","propName","responseHandler","catch","e","errorHandler","console","warn","render","newProps","state","cloneElement","Children","only","children"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACCC,SADD,QAEO,iBAFP;AAIA;;;;;;;;;;AASA,eAAe,MAAMC,GAAN,SAAkBF,KAAK,CAACG,SAAxB,CAAkC;AAChDC,EAAAA,iBAAiB,GAAI;AACpB,QAAIC,OAAJ;;AACA,QAAK,KAAKC,KAAL,CAAWC,IAAhB,EAAuB;AACtBF,MAAAA,OAAO,GAAGG,KAAK,CAAE,KAAKF,KAAL,CAAWG,GAAb,EAAkB,KAAKH,KAAL,CAAWC,IAA7B,CAAf;AACA,KAFD,MAEO;AACNF,MAAAA,OAAO,GAAGG,KAAK,CAAE,KAAKF,KAAL,CAAWG,GAAb,CAAf;AACA;;AACDJ,IAAAA,OAAO,CAACK,IAAR,CAAcC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAAnB,EACCF,IADD,CACOG,CAAC,IAAI;AACX,UAAKA,CAAL,EAAS;AACR,aAAKC,QAAL,CAAe;AAAE,WAAC,KAAKR,KAAL,CAAWS,QAAZ,GAAyB,KAAKT,KAAL,CAAWU,eAAX,GAA6B,KAAKV,KAAL,CAAWU,eAAX,CAA4BH,CAA5B,CAA7B,GAA+DA;AAA1F,SAAf;AACA;AACD,KALD,EAMCI,KAND,CAMQC,CAAC,IAAM,KAAKZ,KAAL,CAAWa,YAAX,GAA0B,KAAKb,KAAL,CAAWa,YAAX,CAAyBD,CAAzB,CAA1B,GAAyDE,OAAO,CAACC,IAAR,CAAcH,CAAd,CANxE;AAOA;;AACDI,EAAAA,MAAM,GAAI;AACT,QAAIC,QAAQ,GAAGtB,SAAS,CAAE,KAAKK,KAAP,EAAc,CAAE,KAAF,EAAS,MAAT,EAAiB,UAAjB,EAA6B,iBAA7B,EAAgD,cAAhD,CAAd,CAAxB;;AACA,QAAK,KAAKkB,KAAV,EAAkB;AACjBD,MAAAA,QAAQ,CAAE,KAAKjB,KAAL,CAAWS,QAAb,CAAR,GAAkC,KAAKS,KAAL,CAAY,KAAKlB,KAAL,CAAWS,QAAvB,CAAlC;AACA;;AACD,WAAOf,KAAK,CAACyB,YAAN,CACNzB,KAAK,CAAC0B,QAAN,CAAeC,IAAf,CAAqB,KAAKrB,KAAL,CAAWsB,QAAhC,CADM,EAENL,QAFM,CAAP;AAIA;;AAzB+C","sourcesContent":["import React from 'react';\nimport {\n\tfilterObj\n} from '../../functions';\n\n/**\n * \n * PROPS\n * url: URL string to fetch\n * init (optional): init object for fetch API\n * propName: string name of props to pass state through\n * responseHandler (optional): ( json ) => any\n * errorHandler (optional): ( exception ) => void\n */\nexport default class App extends React.Component {\n\tcomponentDidMount () {\n\t\tlet promise;\n\t\tif ( this.props.init ) {\n\t\t\tpromise = fetch( this.props.url, this.props.init );\n\t\t} else {\n\t\t\tpromise = fetch( this.props.url );\n\t\t}\n\t\tpromise.then( r => r.json() )\n\t\t.then( j => {\n\t\t\tif ( j ) {\n\t\t\t\tthis.setState( { [this.props.propName]: ( this.props.responseHandler ? this.props.responseHandler( j ) : j ) } )\n\t\t\t}\n\t\t} )\n\t\t.catch( e => ( this.props.errorHandler ? this.props.errorHandler( e ) : console.warn( e ) ) )\n\t}\n\trender () {\n\t\tlet newProps = filterObj( this.props, [ \"url\", \"init\", \"propName\", \"responseHandler\", \"errorHandler\" ] );\n\t\tif ( this.state ) {\n\t\t\tnewProps[ this.props.propName ] = this.state[ this.props.propName ];\n\t\t}\n\t\treturn React.cloneElement(\n\t\t\tReact.Children.only( this.props.children ),\n\t\t\tnewProps\n\t\t)\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}